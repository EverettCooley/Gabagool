<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" href= "{{ url_for('static',filename='../static/css/main.css') }}">
		<title>The Gabagool</title>
	</head>

	<body>

	
 
	</div>

		<img src="{{ url_for('static', filename='../static/css/logo.png') }}"class="center1">
		<form method="get" action="{{ url_for('results') }}">
			<div class="home-form">
			<label for="searchterm"></label><br/>
			<!-- <img src="{{ url_for('static', filename='../static/logo.png') }}" style="width:70px;height:70px;"> -->
			<!-- <input type="text" name="searchterm" /><br /> -->
			<input class="text-input" id="search-input" autocomplete="off" oninput="submit_input();" type="text" name='test'/>
			<input type="submit" value="Go" />
		</div>
			<div class="home-form">
				<p id="autocomplete"></p> 
			</div>

 
			<div class="home-form">
				<label>Select Category</label><br/>
				<select name="category" method="get" action="{{ url_for('results') }}">

	  				<option value="" selected></option>
	  				{% for cat in categories[2:] %}
	    			<option value="{{cat}}">{{cat}}</option>
	  				{% endfor %}
				</select>
			</div>
			

		</form>	

		<script>
			function submit_input(){
				var message = document.getElementById("search-input").value;

				var entry = {
					"message": message
				};

				console.log("worked")
				fetch(`${window.origin}/complete`, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(entry)
				}).then(function(response) {
					if (response.status !== 200) {
						console.log('Looks like there was a problem. Status Code:');
						return;
					}
					response.json().then(function(data) {
						document.getElementById('autocomplete').innerHTML = data;
					});
				})
			}
		</script> 

		<br>
		
		<!-- **** Eventually want to add a navbar **** -->
		<!-- <nav class="navbar navbar-expand-lg navbar-light bg-light">
  		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    	<span class="navbar-toggler-icon"></span>
  		</button>
  		<div class="collapse navbar-collapse" id="navbarNavDropdown">
    	<ul class="navbar-nav">
      		<li class="nav-item active">
        		<a class="nav-link" href="/">About Project <span class="sr-only">(current)</span></a>
      		</li>
      		<li class="nav-item">
        		<a class="nav-link" href="https://github.com/EverettCooley/Gabagool">Github</a>
      		</li>
     
    	</ul>
  		</div>
	</nav> -->
		
	</body>	
</html>
